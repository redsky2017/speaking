<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Day 7: Review Words (Pro Player)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            touch-action: manipulation;
        }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .btn-press:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }

        /* æ¨¡ç³Šé®ç½© */
        .blur-reveal {
            filter: blur(8px);
            opacity: 0.5;
            transition: all 0.5s ease;
            user-select: none;
            cursor: pointer;
        }
        .revealed {
            filter: blur(0);
            opacity: 1;
            cursor: default;
        }

        /* åŠ¨ç”» */
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* è‡ªå®šä¹‰è¿›åº¦æ¡æ ·å¼ */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 4px;
            background: #cbd5e1;
            border-radius: 2px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }
        input[type=range]::-webkit-slider-thumb:active {
            transform: scale(1.3);
            background: #2563eb;
        }
    </style>
</head>
<body class="bg-blue-50 text-gray-800 select-none">

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // --- å›¾æ ‡ç»„ä»¶ï¼ˆå¯¹åº”å‰å…­å¤©æ‰€æœ‰è¯ï¼‰ ---
    const IconUp = () => <span className="text-6xl">â¬†ï¸</span>;
    const IconSun = () => <span className="text-6xl">â˜€ï¸</span>;
    const IconFace = () => <span className="text-6xl">ğŸ˜Š</span>;
    const IconWash = () => <span className="text-6xl">ğŸ’¦</span>;
    const IconTeeth = () => <span className="text-6xl">ğŸ˜</span>;
    const IconBrush = () => <span className="text-6xl">ğŸª¥</span>;
    const IconShirt = () => <span className="text-6xl">ğŸ‘•</span>;
    const IconPutOn = () => <span className="text-6xl">ğŸ§¥</span>;
    const IconShoes = () => <span className="text-6xl">ğŸ‘Ÿ</span>;
    const IconFeet = () => <span className="text-6xl">ğŸ¦¶</span>;
    const IconWater = () => <span className="text-6xl">ğŸ’§</span>;
    const IconCup = () => <span className="text-6xl">ğŸ¥›</span>;

    const IconVolume = () => <span>ğŸ”Š</span>;
    const IconPlay = () => <span className="ml-1 text-xl">â–¶ï¸</span>;
    const IconPause = () => <span className="text-xl">â¸ï¸</span>;
    const IconCheck = () => <span className="text-blue-500">âœ…</span>;
    const IconCircle = () => <div className="w-5 h-5 rounded-full border-2 border-gray-300"></div>;
    const IconBook = () => <span className="text-2xl">ğŸ“š</span>;

    const Day7App = () => {
        // å…¨å±€ UI çŠ¶æ€
        const [activeTab, setActiveTab] = useState('learn');

        // å…¨å±€æ’­æ”¾å™¨çŠ¶æ€
        const [isPlaying, setIsPlaying] = useState(false);
        const [currentFile, setCurrentFile] = useState(null);
        const [currentTime, setCurrentTime] = useState(0);
        const [duration, setDuration] = useState(0);
        const audioRef = useRef(new Audio());

        // å†…å®¹çŠ¶æ€
        const [currentVocabIndex, setCurrentVocabIndex] = useState(0);
        const [showVocabTranslation, setShowVocabTranslation] = useState(false);
        const [showStoryTranslation, setShowStoryTranslation] = useState(false);
        const [currentStep, setCurrentStep] = useState(0);

        // æ»‘åŠ¨åˆ‡å¡ç‰‡
        const touchStartX = useRef(0);
        const touchEndX = useRef(0);

        // Day 7ï¼šå¤ä¹  Day1â€“Day6 çš„å…¨éƒ¨å•è¯
        const content = {
            title: "Day 7: Review Words",
            vocab: [
                // Day 1 èµ·åºŠï¼šUp, Sun
                {
                    word: "Up",
                    cn: "èµ·æ¥ / èµ·åºŠ",
                    icon: <IconUp />,
                    sentence: "Wake up!",
                    audioWord: "word_up.mp3",
                    audioSent: "sent_wake_up.mp3"
                },
                {
                    word: "Sun",
                    cn: "å¤ªé˜³",
                    icon: <IconSun />,
                    sentence: "Hello, sun.",
                    audioWord: "word_sun.mp3",
                    audioSent: "sent_hello_sun.mp3"
                },
                // Day 2 æ´—è„¸ï¼šFace, Wash
                {
                    word: "Face",
                    cn: "è„¸",
                    icon: <IconFace />,
                    sentence: "Wash my face.",
                    audioWord: "word_face.mp3",
                    audioSent: "sent_wash_my_face.mp3"
                },
                {
                    word: "Wash",
                    cn: "æ´— / æ´—ä¸€æ´—",
                    icon: <IconWash />,
                    sentence: "Wash, wash, wash.",
                    audioWord: "word_wash.mp3",
                    audioSent: "sent_wash.mp3"
                },
                // Day 3 åˆ·ç‰™ï¼šTeeth, Brush
                {
                    word: "Teeth",
                    cn: "ç‰™é½¿",
                    icon: <IconTeeth />,
                    sentence: "Brush your teeth.",
                    audioWord: "word_teeth.mp3",
                    audioSent: "sent_brush_your_teeth.mp3"
                },
                {
                    word: "Brush",
                    cn: "åˆ· / åˆ·ä¸€åˆ·",
                    icon: <IconBrush />,
                    sentence: "Brush, brush, brush.",
                    audioWord: "word_brush.mp3",
                    audioSent: "sent_brush.mp3"
                },
                // Day 4 ç©¿è¡£ï¼šShirt, Put on
                {
                    word: "Shirt",
                    cn: "ä¸Šè¡£ / è¡¬è¡«",
                    icon: <IconShirt />,
                    sentence: "Put on your shirt.",
                    audioWord: "word_shirt.mp3",
                    audioSent: "sent_shirt.mp3"
                },
                {
                    word: "Put on",
                    cn: "ç©¿ä¸Š",
                    icon: <IconPutOn />,
                    sentence: "Put on, put on.",
                    audioWord: "word_put_on.mp3",
                    audioSent: "sent_put_on_put_on.mp3"
                },
                // Day 5 ç©¿é‹ï¼šShoes, Feet
                {
                    word: "Shoes",
                    cn: "é‹å­",
                    icon: <IconShoes />,
                    sentence: "One, two, shoes!",
                    audioWord: "word_shoes.mp3",
                    audioSent: "sent_shoes.mp3"
                },
                {
                    word: "Feet",
                    cn: "è„š / å°è„šä¸«",
                    icon: <IconFeet />,
                    sentence: "Tap your feet.",
                    audioWord: "word_feet.mp3",
                    audioSent: "sent_feet.mp3"
                },
                // Day 6 å–æ°´ï¼šWater, Cup
                {
                    word: "Water",
                    cn: "æ°´",
                    icon: <IconWater />,
                    sentence: "Drink some water.",
                    audioWord: "word_water.mp3",
                    audioSent: "sent_drink_some_water.mp3"
                },
                {
                    word: "Cup",
                    cn: "æ¯å­",
                    icon: <IconCup />,
                    sentence: "Get your cup.",
                    audioWord: "word_cup.mp3",
                    audioSent: "sent_get_your_cup.mp3"
                }
            ],
            // å‰§æœ¬ï¼šå®¶é•¿å¸¦å­©å­åšâ€œå•è¯+åŠ¨ä½œâ€å¤ä¹ 
            script: [
                {
                    step: 1,
                    action: "åŠ¨ä½œï¼šç«™åœ¨å›ºå®šä½ç½®ï¼Œå‘Šè¯‰å­©å­â€œæˆ‘ä»¬æ¥ç©å•è¯å¤ä¹ æ¸¸æˆâ€",
                    parentSay: "Letâ€™s review our morning words!",
                    cn: "æˆ‘ä»¬æ¥å¤ä¹ ä¸€ä¸‹æ—©ä¸Šå­¦è¿‡çš„å•è¯å§ï¼",
                    tip: "å¯ä»¥å…ˆå¿«é€Ÿæä¸€æ Day1â€“Day6 çš„ä¸­æ–‡ï¼Œè®©å­©å­çŸ¥é“ç­‰ä¸‹ä¼šæœ‰å¾ˆå¤šç†Ÿæ‚‰çš„å†…å®¹ã€‚",
                    audio: "guide_day7_step1.mp3"
                },
                {
                    step: 2,
                    action: "åŠ¨ä½œï¼šæ¯è¯´ä¸€ä¸ªå•è¯å°±åšä¸€ä¸ªå°åŠ¨ä½œï¼ˆUp ä¼¸æ‡’è…°ï¼ŒSun æ‰“å¼€çª—å¸˜ï¼ŒFace/Wash åšæ´—è„¸åŠ¨ä½œâ€¦ï¼‰",
                    parentSay: "Up, sun, face, wash. Teeth, brush. Shirt, put on. Shoes, feet. Water, cup!",
                    cn: "Upã€Sunã€Faceã€Washã€Teethã€Brushã€Shirtã€Put onã€Shoesã€Feetã€Waterã€Cupï¼",
                    tip: "ä¸æ±‚å…¨éƒ¨åšå¯¹ï¼Œå¯ä»¥æŒ‘å­©å­æœ€ç†Ÿæ‚‰çš„å‡ ä¸ªåŠ¨ä½œåšï¼Œå¤šå¤¸â€œGreat job!â€ã€‚",
                    audio: "guide_day7_step2.mp3"
                },
                {
                    step: 3,
                    action: "åŠ¨ä½œï¼šå®¶é•¿è¯´ä¸­æ–‡æç¤ºï¼Œè®©å­©å­è‡ªå·±è¯´è‹±æ–‡å•è¯ï¼Œæœ€åä¸€èµ·å–Š I can do it!",
                    parentSay: "You know these words. I can do it!",
                    cn: "è¿™äº›å•è¯ä½ éƒ½ä¼šå•¦â€”â€”I can do it!",
                    tip: "å»ºè®®è¿™ä¸ªç¯èŠ‚ä¾§é‡â€œæˆå°±æ„Ÿâ€ï¼Œå¯ä»¥å½•ä¸€å°æ®µè§†é¢‘ï¼Œåªè¦æ‹åˆ°å­©å­å¼€å¿ƒè¯´å‡ºä¸€ä¸¤ä¸ªå•è¯å°±å¤Ÿäº†ã€‚",
                    audio: "guide_day7_step3.mp3"
                }
            ],
            // å°æ•…äº‹ï¼šæŠŠæ‰€æœ‰å•è¯ä¸²æˆâ€œMorning Words Paradeâ€
            story: {
                title: "Morning Words Parade",
                textEn: "Today is Review Day. Little Fox stands in the room. Mom says, 'Letâ€™s have a Morning Words Parade!' First, Little Fox says, 'Up!' and stretches big. Then he says, 'Sun!' and pretends to open the window. 'Face, wash.' He washes his face. 'Teeth, brush.' He brushes his teeth. 'Shirt, put on.' He puts on his shirt. 'Shoes, feet.' He taps his feet and puts on his shoes. 'Water, cup.' He holds an invisible cup and drinks. Mom smiles and claps. Little Fox shouts, 'I can do it!' The Morning Words Parade is a big success.",
                textCn: "ä»Šå¤©æ˜¯å¤ä¹ æ—¥ã€‚å°ç‹ç‹¸ç«™åœ¨æˆ¿é—´ä¸­é—´ï¼Œå¦ˆå¦ˆè¯´ï¼šâ€œæˆ‘ä»¬æ¥ä¸€åœºæ™¨é—´å•è¯å¤§æ¸¸è¡Œï¼â€å°ç‹ç‹¸å…ˆè¯´â€œUpâ€ï¼Œä¼¸ä¸€ä¸ªå¤§æ‡’è…°ï¼›å†è¯´â€œSunâ€ï¼Œå‡è£…æŠŠçª—æˆ·æ¨å¼€ã€‚æ¥ç€â€œFace, washâ€ï¼Œä»–åšæ´—è„¸çš„åŠ¨ä½œï¼›â€œTeeth, brushâ€ï¼Œä»–åšåˆ·ç‰™çš„åŠ¨ä½œï¼›â€œShirt, put onâ€ï¼Œä»–å¥½åƒåœ¨ç©¿ä¸Šè¡£ï¼›â€œShoes, feetâ€ï¼Œä»–æ‹æ‹å°è„šï¼Œç©¿ä¸Šé‹å­ï¼›â€œWater, cupâ€ï¼Œä»–æ‹¿èµ·ä¸€åªâ€œçœ‹ä¸è§çš„æ¯å­â€å–ä¸€å£æ°´ã€‚å¦ˆå¦ˆç¬‘ç€é¼“æŒï¼Œå°ç‹ç‹¸å¤§å£°å–Šï¼šâ€œI can do it!â€ è¿™åœºæ™¨é—´å•è¯å¤§æ¸¸è¡Œï¼Œå¤§æˆåŠŸï¼",
                audio: "story_day7.mp3"
            },
            // ç£¨è€³æœµï¼šæŠŠ 12 ä¸ªå•è¯åšæˆèŠ‚å¥æ„Ÿå¼ºçš„å° chant
            scenarioAudio: "scenario_day7.mp3"
        };

        // --- éŸ³é¢‘äº‹ä»¶ç»‘å®š ---
        useEffect(() => {
            const audio = audioRef.current;

            const updateTime = () => {
                setCurrentTime(audio.currentTime);
            };

            const onLoadedMetadata = () => {
                if (!isNaN(audio.duration)) {
                    setDuration(audio.duration);
                }
            };

            const onEnded = () => {
                setIsPlaying(false);
                setCurrentTime(0);
            };

            audio.addEventListener('timeupdate', updateTime);
            audio.addEventListener('loadedmetadata', onLoadedMetadata);
            audio.addEventListener('ended', onEnded);

            return () => {
                audio.removeEventListener('timeupdate', updateTime);
                audio.removeEventListener('loadedmetadata', onLoadedMetadata);
                audio.removeEventListener('ended', onEnded);
                audio.pause();
            };
        }, []);

        // --- æ’­æ”¾é€»è¾‘ ---
        const handlePlayClick = (filename) => {
            const audio = audioRef.current;

            if (currentFile === filename) {
                if (isPlaying) {
                    audio.pause();
                    setIsPlaying(false);
                } else {
                    audio.play().then(() => setIsPlaying(true));
                }
                return;
            }

            audio.src = filename;
            setCurrentFile(filename);
            setCurrentTime(0);
            setDuration(0);

            audio.play()
                .then(() => {
                    setIsPlaying(true);
                })
                .catch((err) => {
                    console.error("æ’­æ”¾å¤±è´¥", err);
                    alert("æ‰¾ä¸åˆ°éŸ³é¢‘æ–‡ä»¶: " + filename + "\\nè¯·ç¡®ä¿ mp3 æ–‡ä»¶å’Œ html åœ¨åŒä¸€ç›®å½•ã€‚");
                    setIsPlaying(false);
                });
        };

        const handleSeek = (e) => {
            const time = parseFloat(e.target.value);
            setCurrentTime(time);
            audioRef.current.currentTime = time;
        };

        const formatTime = (time) => {
            if (!time || isNaN(time)) return "0:00";
            const mins = Math.floor(time / 60);
            const secs = Math.floor(time % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        };

        // --- å•è¯å¡ç‰‡æ»‘åŠ¨ ---
        const nextCard = () => {
            if (currentVocabIndex < content.vocab.length - 1) {
                setCurrentVocabIndex((prev) => prev + 1);
                setShowVocabTranslation(false);
            }
        };

        const prevCard = () => {
            if (currentVocabIndex > 0) {
                setCurrentVocabIndex((prev) => prev - 1);
                setShowVocabTranslation(false);
            }
        };

        const handleTouchStart = (e) => {
            touchStartX.current = e.targetTouches[0].clientX;
        };

        const handleTouchMove = (e) => {
            touchEndX.current = e.targetTouches[0].clientX;
        };

        const handleTouchEnd = () => {
            if (!touchStartX.current || !touchEndX.current) return;
            const diff = touchStartX.current - touchEndX.current;
            if (diff > 50) nextCard();
            if (diff < -50) prevCard();
            touchStartX.current = 0;
            touchEndX.current = 0;
        };

        return (
            <div className="flex flex-col min-h-screen max-w-md mx-auto bg-blue-50 shadow-2xl relative pb-28">
                {/* Header */}
                <header className="bg-blue-400 text-white p-4 shadow-md text-center sticky top-0 z-10">
                    <h1 className="text-xl font-bold flex items-center justify-center gap-2">
                        â­ï¸ {content.title}
                    </h1>
                </header>

                {/* Main */}
                <main className="flex-1 p-4 overflow-y-auto pb-24 hide-scrollbar">
                    {/* TAB: å­¦å•è¯ï¼šå¤ä¹  Day1â€“Day6 æ‰€æœ‰è¯ */}
                    {activeTab === 'learn' && (() => {
                        const item = content.vocab[currentVocabIndex];
                        return (
                            <div
                                className="flex-1 flex flex-col justify-center items-center space-y-6 animate-fade-in"
                                onTouchStart={handleTouchStart}
                                onTouchMove={handleTouchMove}
                                onTouchEnd={handleTouchEnd}
                            >
                                {/* è¿›åº¦ç‚¹ï¼ˆ12 ä¸ªå°ç‚¹ï¼‰ */}
                                <div className="flex gap-1 mb-2 flex-wrap justify-center">
                                    {content.vocab.map((_, idx) => (
                                        <div
                                            key={idx}
                                            className={`h-2 rounded-full transition-all duration-300 ${
                                                idx === currentVocabIndex ? 'w-6 bg-blue-500' : 'w-2 bg-gray-300'
                                            }`}
                                        ></div>
                                    ))}
                                </div>

                                {/* å•è¯å¡ç‰‡ */}
                                <div className="bg-white w-full rounded-3xl p-8 shadow-xl flex flex-col items-center relative min-h-[360px] justify-between border-b-8 border-blue-100">
                                    <div className="flex-1 flex flex-col items-center justify-center w-full">
                                        <div className="mb-6 transform scale-110">
                                            {item.icon}
                                        </div>

                                        {/* è‹±æ–‡å•è¯ */}
                                        <h3
                                            className="text-3xl font-extrabold text-gray-800 mb-2 cursor-pointer active:text-blue-500 active:scale-95 transition-transform text-center"
                                            onClick={() => handlePlayClick(item.audioWord)}
                                        >
                                            {item.word}
                                            <span className="text-lg text-blue-400 ml-1">ğŸ”ˆ</span>
                                        </h3>
                                        <p className="text-xs text-gray-400 mb-4">(ç‚¹å‡»å•è¯æ’­æ”¾è¯»éŸ³)</p>

                                        {/* ä¸­æ–‡ç¿»è¯‘ï¼ˆé»˜è®¤æ¨¡ç³Šï¼Œç‚¹å‡»æ˜¾ç¤ºï¼‰ */}
                                        <div
                                            onClick={() => setShowVocabTranslation(true)}
                                            className="w-full text-center py-3 px-2 rounded-xl bg-gray-50 cursor-pointer"
                                        >
                                            <p
                                                className={`text-lg font-medium text-gray-700 transition-all duration-500 ${
                                                    showVocabTranslation ? 'revealed' : 'blur-reveal'
                                                }`}
                                            >
                                                {item.cn}
                                            </p>
                                            {!showVocabTranslation && (
                                                <p className="text-xs text-gray-400 mt-[-18px] pointer-events-none">
                                                    ç‚¹å‡»æ˜¾ç¤ºä¸­æ–‡
                                                </p>
                                            )}
                                        </div>
                                    </div>

                                    {/* ä¾‹å¥ */}
                                    <div className="w-full mt-4 bg-blue-50 rounded-2xl p-3 flex items-center justify-between border border-blue-100">
                                        <span className="text-blue-900 font-medium text-base italic">
                                            "{item.sentence}"
                                        </span>
                                        <button
                                            onClick={() => handlePlayClick(item.audioSent)}
                                            className="btn-press bg-blue-400 text-white p-3 rounded-full shadow-lg hover:bg-blue-500 transition ml-3"
                                        >
                                            <IconVolume />
                                        </button>
                                    </div>
                                </div>

                                {/* å·¦å³åˆ‡æ¢æŒ‰é’® */}
                                <div className="flex justify-between w-full px-4 text-gray-400">
                                    <button onClick={prevCard} disabled={currentVocabIndex === 0} className="disabled:opacity-20 p-2 text-3xl btn-press">â¬…ï¸</button>
                                    <span className="text-sm mt-2 opacity-50">
                                        {currentVocabIndex + 1} / {content.vocab.length}
                                    </span>
                                    <button onClick={nextCard} disabled={currentVocabIndex === content.vocab.length - 1} className="disabled:opacity-20 p-2 text-3xl btn-press">â¡ï¸</button>
                                </div>
                            </div>
                        );
                    })()}

                    {/* TAB: ç£¨è€³æœµï¼š12 ä¸ªè¯ä¸²æˆ chant */}
                    {activeTab === 'audio' && (
                        <div className="bg-white rounded-2xl p-6 shadow-lg text-center space-y-6 mt-4 animate-fade-in">
                            <div className="text-6xl animate-bounce">ğŸµ</div>
                            <div>
                                <h2 className="text-xl font-bold">Word Review Chant</h2>
                                <p className="text-gray-500 text-sm mt-1">æŠŠå‰å…­å¤©çš„å•è¯ä¸²åœ¨ä¸€èµ·å¿µä¸€é</p>
                            </div>
                            <div className="bg-gray-100 rounded-xl p-4 text-left">
                                <p className="text-gray-600 font-mono text-sm leading-relaxed">
                                    "Up, sun, face, wash.<br/>
                                    Teeth, brush, shirt, put on.<br/>
                                    Shoes, feet, water, cup.<br/>
                                    Morning words, say them up!"
                                </p>
                            </div>
                            <div className="space-y-4">
                                <button
                                    onClick={() => handlePlayClick(content.scenarioAudio)}
                                    className={`btn-press w-full py-6 rounded-xl flex items-center justify-center gap-3 font-bold text-xl transition transform hover:scale-105 ${
                                        isPlaying && currentFile === content.scenarioAudio
                                            ? 'bg-red-500 text-white'
                                            : 'bg-green-500 text-white shadow-lg'
                                    }`}
                                >
                                    {isPlaying && currentFile === content.scenarioAudio ? (
                                        <>
                                            <IconPause /> æš‚åœå¤ä¹ éŸ³é¢‘
                                        </>
                                    ) : (
                                        <>
                                            <IconPlay /> æ’­æ”¾å¤ä¹ éŸ³é¢‘
                                        </>
                                    )}
                                </button>

                                {currentFile === content.scenarioAudio && (
                                    <div className="bg-gray-50 p-3 rounded-xl">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="text-xs text-gray-500">{formatTime(currentTime)}</span>
                                            <input
                                                type="range"
                                                min="0"
                                                max={duration || 0}
                                                step="0.1"
                                                value={currentTime}
                                                onChange={handleSeek}
                                                className="flex-1"
                                            />
                                            <span className="text-xs text-gray-500">{formatTime(duration)}</span>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* TAB: å‰§æœ¬ï¼šå®¶é•¿å¦‚ä½•å¸¦å¤ä¹  */}
                    {activeTab === 'guide' && (
                        <div className="space-y-4 animate-fade-in">
                            {content.script.map((step, index) => (
                                <div
                                    key={index}
                                    className={`bg-white rounded-xl shadow overflow-hidden transition-all duration-300 ${
                                        currentStep === index ? 'ring-2 ring-blue-400' : 'opacity-90'
                                    }`}
                                >
                                    <div
                                        className="p-3 cursor-pointer flex justify-between items-center bg-gray-50 border-b"
                                        onClick={() => setCurrentStep(index)}
                                    >
                                        <span className="font-bold text-gray-700">Step {step.step}</span>
                                        {currentStep === index ? <IconCheck /> : <IconCircle />}
                                    </div>
                                    {currentStep === index && (
                                        <div className="p-4 space-y-3">
                                            <div className="text-sm text-blue-700 bg-blue-50 p-2 rounded font-medium">
                                                â˜… {step.action}
                                            </div>
                                            <div className="bg-blue-50 p-3 rounded-xl border border-blue-100 relative">
                                                <p className="text-xs text-gray-400 uppercase tracking-wide mb-1">
                                                    å®¶é•¿è¯´:
                                                </p>
                                                <p className="text-lg font-bold text-gray-800 pr-8">
                                                    {step.parentSay}
                                                </p>
                                                <p className="text-sm text-gray-500 mt-1">
                                                    ({step.cn})
                                                </p>
                                                <button
                                                    onClick={() => handlePlayClick(step.audio)}
                                                    className="absolute right-2 top-2 text-blue-500 p-2 btn-press"
                                                >
                                                    <IconVolume />
                                                </button>
                                            </div>
                                            <p className="text-xs text-gray-400 italic text-center">
                                                "{step.tip}"
                                            </p>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    )}

                    {/* TAB: å°æ•…äº‹ï¼šMorning Words Parade */}
                    {activeTab === 'story' && (
                        <div className="bg-white rounded-2xl p-6 shadow-lg space-y-4 mt-2 animate-fade-in flex flex-col h-full relative">
                            <div className="text-center border-b pb-4">
                                <h2 className="text-xl font-bold text-blue-600">{content.story.title}</h2>
                                <p className="text-xs text-gray-400">Read & Listen</p>
                            </div>

                            <div className="flex-1 overflow-y-auto space-y-6 pb-2">
                                <div className="bg-blue-50 p-4 rounded-xl">
                                    <p className="text-lg leading-relaxed font-bold text-gray-800">
                                        {content.story.textEn}
                                    </p>
                                </div>

                                <div
                                    className="relative p-4 rounded-xl border-2 border-dashed border-gray-200 cursor-pointer hover:bg-gray-50 active:bg-gray-100 transition"
                                    onClick={() => setShowStoryTranslation(true)}
                                >
                                    <p className="text-xs text-gray-400 mb-2 font-bold">
                                        ä¸­æ–‡å¤§æ„ï¼ˆç‚¹å‡»æŸ¥çœ‹ï¼‰:
                                    </p>
                                    <p
                                        className={`text-base leading-relaxed text-gray-600 transition-all duration-500 ${
                                            showStoryTranslation ? 'revealed' : 'blur-reveal'
                                        }`}
                                    >
                                        {content.story.textCn}
                                    </p>
                                </div>
                            </div>

                            <div className="mt-auto pt-4 space-y-4">
                                <button
                                    onClick={() => handlePlayClick(content.story.audio)}
                                    className={`btn-press w-full py-6 rounded-xl flex items-center justify-center gap-3 font-bold text-xl text-white shadow-lg transition transform hover:scale-105 ${
                                        isPlaying && currentFile === content.story.audio
                                            ? 'bg-red-500'
                                            : 'bg-blue-500'
                                    }`}
                                >
                                    {isPlaying && currentFile === content.story.audio ? (
                                        <>
                                            <IconPause /> æš‚åœæ•…äº‹
                                        </>
                                    ) : (
                                        <>
                                            <IconPlay /> æ’­æ”¾æ•…äº‹
                                        </>
                                    )}
                                </button>

                                {currentFile === content.story.audio && (
                                    <div className="bg-gray-50 p-3 rounded-xl">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="text-xs text-gray-500">{formatTime(currentTime)}</span>
                                            <input
                                                type="range"
                                                min="0"
                                                max={duration || 0}
                                                step="0.1"
                                                value={currentTime}
                                                onChange={handleSeek}
                                                className="flex-1"
                                            />
                                            <span className="text-xs text-gray-500">{formatTime(duration)}</span>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </main>

                {/* Bottom Nav */}
                <nav
                    className="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around p-2 pb-safe shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20 max-w-md mx-auto">
                    <button
                        onClick={() => setActiveTab('learn')}
                        className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
                            activeTab === 'learn' ? 'text-blue-500' : 'text-gray-400'
                        }`}
                    >
                        <span className="text-xl">ğŸ“–</span>
                        <span className="text-xs font-medium">å•è¯å¤ä¹ </span>
                    </button>
                    <button
                        onClick={() => setActiveTab('audio')}
                        className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
                            activeTab === 'audio' ? 'text-blue-500' : 'text-gray-400'
                        }`}
                    >
                        <span className="text-xl">ğŸµ</span>
                        <span className="text-xs font-medium">ç£¨è€³æœµ</span>
                    </button>
                    <button
                        onClick={() => setActiveTab('guide')}
                        className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
                            activeTab === 'guide' ? 'text-blue-500' : 'text-gray-400'
                        }`}
                    >
                        <span className="text-xl">ğŸ“‹</span>
                        <span className="text-xs font-medium">å‰§æœ¬</span>
                    </button>
                    <button
                        onClick={() => setActiveTab('story')}
                        className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
                            activeTab === 'story' ? 'text-blue-500' : 'text-gray-400'
                        }`}
                    >
                        <IconBook />
                        <span className="text-xs font-medium">æ•…äº‹</span>
                    </button>
                </nav>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<Day7App />);
</script>
</body>
</html>
