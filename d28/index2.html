<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Day 28: Bedtime Review</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      touch-action: manipulation;
    }
    .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    .btn-press:active {
      transform: scale(0.95);
      opacity: 0.8;
    }
    .hide-scrollbar::-webkit-scrollbar { display: none; }

    .blur-reveal {
      filter: blur(8px);
      opacity: 0.5;
      transition: all 0.5s ease;
      user-select: none;
      cursor: pointer;
    }
    .revealed {
      filter: blur(0);
      opacity: 1;
      cursor: default;
    }

    .animate-fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 4px;
      background: #cbd5e1;
      border-radius: 2px;
      outline: none;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #3b82f6;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
      transition: transform 0.1s;
    }
    input[type=range]::-webkit-slider-thumb:active {
      transform: scale(1.3);
      background: #2563eb;
    }
  </style>
</head>
<body class="bg-slate-50 text-gray-800 select-none">
<div id="root"></div>

<script type="text/babel">
  const { useState, useEffect, useRef } = React;

  // â­ æ¯ä¸ªæ–‡ä»¶æ”¹è¿™é‡Œï¼š22 / 23 / 24 / 25 / 26 / 27 / 28
  const dayNumber = 28;

  // å›¾æ ‡ç»„ä»¶ï¼ˆç®€å•ç”¨ emojiï¼‰
  const Emoji = ({ children }) => <span className="text-6xl">{children}</span>;

  const IconHappy   = () => <Emoji>ğŸ˜Š</Emoji>;
  const IconSad     = () => <Emoji>ğŸ˜¢</Emoji>;
  const IconAngry   = () => <Emoji>ğŸ˜ </Emoji>;
  const IconScared  = () => <Emoji>ğŸ˜¨</Emoji>;

  const IconHug     = () => <Emoji>ğŸ«‚</Emoji>;
  const IconKiss    = () => <Emoji>ğŸ’‹</Emoji>;
  const IconSmile   = () => <Emoji>ğŸ˜Š</Emoji>;
  const IconCry     = () => <Emoji>ğŸ˜­</Emoji>;

  const IconSleep   = () => <Emoji>ğŸ˜´</Emoji>;
  const IconBed     = () => <Emoji>ğŸ›ï¸</Emoji>;
  const IconBlanket = () => <Emoji>ğŸ§¸</Emoji>;
  const IconNight   = () => <Emoji>ğŸŒ™</Emoji>;

  const IconSoft    = () => <Emoji>ğŸ§¸</Emoji>;
  const IconWarm    = () => <Emoji>ğŸ”¥</Emoji>;
  const IconDark    = () => <Emoji>ğŸŒ‘</Emoji>;
  const IconLight   = () => <Emoji>ğŸ’¡</Emoji>;

  const IconStar    = () => <Emoji>â­</Emoji>;
  const IconMoon    = () => <Emoji>ğŸŒ™</Emoji>;
  const IconSky     = () => <Emoji>ğŸŒŒ</Emoji>;
  const IconDream   = () => <Emoji>ğŸ’¤</Emoji>;

  const IconQuiet   = () => <Emoji>ğŸ¤«</Emoji>;
  const IconSlow    = () => <Emoji>ğŸ¢</Emoji>;
  const IconCalm    = () => <Emoji>ğŸƒ</Emoji>;
  const IconGN      = () => <Emoji>ğŸŒ™</Emoji>;

  const IconReview  = () => <Emoji>ğŸ“š</Emoji>;

  const IconVolume  = () => <span>ğŸ”Š</span>;
  const IconPlay    = () => <span className="ml-1 text-xl">â–¶ï¸</span>;
  const IconPause   = () => <span className="text-xl">â¸ï¸</span>;
  const IconCheck   = () => <span className="text-blue-500">âœ…</span>;
  const IconCircle  = () => <div className="w-5 h-5 rounded-full border-2 border-gray-300"></div>;
  const IconBook    = () => <span className="text-2xl">ğŸ“–</span>;

  // ------------------ Day 22â€“28 å†…å®¹ ------------------
  const allContent = {
    22: {
      title: "Day 22: Feelings 1",
      icon: <IconHappy />,
      vocab: [
        {
          word: "happy",
          cn: "å¼€å¿ƒçš„",
          icon: <IconHappy />,
          sentence: "I am happy.",
          audioWord: "word_happy.mp3",
          audioSent: "sent_i_am_happy.mp3"
        },
        {
          word: "sad",
          cn: "éš¾è¿‡çš„",
          icon: <IconSad />,
          sentence: "I am sad.",
          audioWord: "word_sad.mp3",
          audioSent: "sent_i_am_sad.mp3"
        },
        {
          word: "angry",
          cn: "ç”Ÿæ°”çš„",
          icon: <IconAngry />,
          sentence: "I am angry.",
          audioWord: "word_angry.mp3",
          audioSent: "sent_i_am_angry.mp3"
        },
        {
          word: "scared",
          cn: "å®³æ€•çš„",
          icon: <IconScared />,
          sentence: "I am scared.",
          audioWord: "word_scared.mp3",
          audioSent: "sent_i_am_scared.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šå¯¹ç€é•œå­åšç¬‘è„¸ï¼Œè®©å­©å­æ¨¡ä»¿",
          parentSay: "Look at my face. I am happy!",
          cn: "çœ‹æˆ‘çš„è„¸ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼",
          tip: "å…ˆè‡ªå·±å¤¸å¼ åœ°ç¬‘ï¼Œå†è®©å­©å­ç…§ç€é•œå­å­¦â€œhappyâ€çš„è¡¨æƒ…ã€‚",
          audio: "guide_day22_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šåšä¸€å¼ â€œå¿«å“­å‡ºæ¥â€çš„è„¸ï¼Œå†æ…¢æ…¢å˜å›ç¬‘è„¸",
          parentSay: "I am sad. Can you smile?",
          cn: "æˆ‘å¥½éš¾è¿‡ï¼Œä½ èƒ½ç¬‘ä¸€ç¬‘å—ï¼Ÿ",
          tip: "è®©å­©å­ç”¨ç¬‘è„¸â€œæ²»æ„ˆâ€ä½ çš„sadï¼Œè®©ä»–æ„Ÿåˆ°è‡ªå·±å¾ˆé‡è¦ã€‚",
          audio: "guide_day22_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šä¾æ¬¡åšç”Ÿæ°”è„¸ã€å®³æ€•è„¸ï¼Œå†æ”¾æ¾å›åˆ°å¾®ç¬‘",
          parentSay: "I am angry! I am scared! Big feelings!",
          cn: "æˆ‘å¥½ç”Ÿæ°”ï¼æˆ‘å¥½å®³æ€•ï¼å¥½å¤šå¤§æƒ…ç»ªï¼",
          tip: "å‘Šè¯‰å­©å­ï¼Œå¤§æƒ…ç»ªä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥å’Œå¦ˆå¦ˆä¸€èµ·åšè¡¨æƒ…ã€ä¸€èµ·æ…¢æ…¢æ”¾æ¾ã€‚",
          audio: "guide_day22_step3.mp3"
        }
      ],
      story: {
        title: "Big Feelings",
        textEn:
          "Little Robot looks in the mirror. He says, \"I am happy!\" and smiles. Then he makes a sad face. \"I am sad.\" Mom comes and makes an angry face. Robot laughs! Then a toy falls with a loud bang. Robot jumps and says, \"I am scared!\" Mom hugs him and says, \"Big feelings!\"",
        textCn:
          "å°æœºå™¨äººå¯¹ç€é•œå­çœ‹ã€‚ä»–è¯´ï¼šâ€œI am happy!ï¼ˆæˆ‘å¾ˆå¼€å¿ƒï¼ï¼‰â€ï¼Œç„¶åç¬‘äº†èµ·æ¥ã€‚æ¥ç€ä»–åˆåšäº†ä¸€å¼ éš¾è¿‡çš„è„¸ï¼šâ€œI am sad.ï¼ˆæˆ‘å¾ˆéš¾è¿‡ã€‚ï¼‰â€å¦ˆå¦ˆèµ°è¿‡æ¥ï¼Œè£…å‡ºä¸€å¼ ç”Ÿæ°”çš„è„¸ï¼Œå°æœºå™¨äººä¸€ä¸‹ç¬‘äº†ã€‚å¿½ç„¶ï¼Œä¸€ä¸ªç©å…·â€œç °â€åœ°æ‰åœ¨åœ°ä¸Šï¼Œå°æœºå™¨äººå“äº†ä¸€è·³ï¼Œè¯´ï¼šâ€œI am scared!ï¼ˆæˆ‘å¥½å®³æ€•ï¼ï¼‰â€å¦ˆå¦ˆæŠ±ä½ä»–è¯´ï¼šâ€œBig feelings!ï¼ˆå¥½å¤šå¤§æƒ…ç»ªå‘¢ï¼ï¼‰â€",
        audio: "story_day22.mp3"
      },
      scenarioText: "I am happy. I am sad. I am angry. I am scared.",
      scenarioAudio: "scenario_day22.mp3"
    },

    23: {
      title: "Day 23: Feelings 2",
      icon: <IconHug />,
      vocab: [
        {
          word: "hug",
          cn: "æ‹¥æŠ±",
          icon: <IconHug />,
          sentence: "Give me a hug.",
          audioWord: "word_hug.mp3",
          audioSent: "sent_give_me_a_hug.mp3"
        },
        {
          word: "kiss",
          cn: "äº²äº²",
          icon: <IconKiss />,
          sentence: "Kiss, kiss!",
          audioWord: "word_kiss.mp3",
          audioSent: "sent_kiss_kiss.mp3"
        },
        {
          word: "smile",
          cn: "å¾®ç¬‘",
          icon: <IconSmile />,
          sentence: "Smile, please.",
          audioWord: "word_smile.mp3",
          audioSent: "sent_smile_please.mp3"
        },
        {
          word: "cry",
          cn: "å“­",
          icon: <IconCry />,
          sentence: "Don't cry.",
          audioWord: "word_cry.mp3",
          audioSent: "sent_dont_cry.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šå¼ å¼€æ‰‹è‡‚ï¼Œç¤ºæ„å­©å­æ¥æŠ±æŠ±",
          parentSay: "Give me a hug.",
          cn: "æ¥æŠ±æŠ±æˆ‘ã€‚",
          tip: "å¤šç”¨æ‹¥æŠ±æ¥å›åº”æƒ…ç»ªï¼Œè®©å­©å­æ„Ÿåˆ°å®‰å…¨ã€‚",
          audio: "guide_day23_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šè½»è½»äº²ä¸€ä¸‹å­©å­é¢å¤´æˆ–è„¸é¢Š",
          parentSay: "Kiss, kiss!",
          cn: "äº²äº²ï¼",
          tip: "ä¸€è¾¹äº²ä¸€è¾¹ç¬‘ï¼Œè®©å­©å­æŠŠkisså’Œæ¸©æš–è”ç³»èµ·æ¥ã€‚",
          audio: "guide_day23_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šå½“å­©å­å¿«è¦å“­æˆ–åˆšå“­ï¼Œç”¨æ‰‹è½»è½»æ“¦æ“¦çœ¼æ³ª",
          parentSay: "Smile, please. Don't cry.",
          cn: "ç¬‘ä¸€ç¬‘ï¼Œå¥½å—ï¼Ÿåˆ«å“­äº†ã€‚",
          tip: "å…ˆå…±æƒ…ï¼Œå†æ¸©æŸ”å¼•å¯¼ï¼Œç”¨smileä»£æ›¿ä¸€ç›´å“­ã€‚",
          audio: "guide_day23_step3.mp3"
        }
      ],
      story: {
        title: "Hug and Smile",
        textEn:
          "Little Robot sees Mom. He runs and says, \"Hug!\" Mom gives him a big hug. Robot says, \"Kiss, kiss!\" and Mom kisses his head. Robot smiles. Then he drops his toy and starts to cry. Mom wipes his tears gently and says, \"Smile, please. Don't cry.\"",
        textCn:
          "å°æœºå™¨äººçœ‹åˆ°å¦ˆå¦ˆï¼Œè·‘è¿‡å»è¯´ï¼šâ€œHug!ï¼ˆè¦æŠ±æŠ±ï¼ï¼‰â€å¦ˆå¦ˆç»™äº†ä»–ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±ã€‚å°æœºå™¨äººåˆè¯´ï¼šâ€œKiss, kiss!ï¼ˆäº²äº²ï¼ï¼‰â€å¦ˆå¦ˆåœ¨ä»–å¤´ä¸Šè½»è½»äº²äº†ä¸€ä¸‹ã€‚å°æœºå™¨äººç¬‘äº†ã€‚åæ¥ï¼Œä»–ä¸å°å¿ƒæŠŠç©å…·æ‘”åœ¨åœ°ä¸Šï¼Œå“­äº†èµ·æ¥ã€‚å¦ˆå¦ˆè½»è½»å¸®ä»–æ“¦æ‰çœ¼æ³ªï¼Œè¯´ï¼šâ€œSmile, please. Don't cry.ï¼ˆç¬‘ä¸€ç¬‘ï¼Œå¥½å—ï¼Ÿåˆ«å“­äº†ã€‚ï¼‰â€",
        audio: "story_day23.mp3"
      },
      scenarioText: "Give me a hug. Kiss, kiss! Smile, please. Don't cry.",
      scenarioAudio: "scenario_day23.mp3"
    },

    24: {
      title: "Day 24: Bedtime 1",
      icon: <IconSleep />,
      vocab: [
        {
          word: "sleep",
          cn: "ç¡è§‰",
          icon: <IconSleep />,
          sentence: "Time to sleep.",
          audioWord: "word_sleep.mp3",
          audioSent: "sent_time_to_sleep.mp3"
        },
        {
          word: "bed",
          cn: "åºŠ",
          icon: <IconBed />,
          sentence: "Get in bed.",
          audioWord: "word_bed.mp3",
          audioSent: "sent_get_in_bed.mp3"
        },
        {
          word: "blanket",
          cn: "æ¯¯å­",
          icon: <IconBlanket />,
          sentence: "Here's your blanket.",
          audioWord: "word_blanket.mp3",
          audioSent: "sent_heres_your_blanket.mp3"
        },
        {
          word: "night",
          cn: "å¤œæ™š",
          icon: <IconNight />,
          sentence: "Good night.",
          audioWord: "word_night.mp3",
          audioSent: "sent_good_night.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šæ‰“ä¸ªå“ˆæ¬ ï¼Œç¤ºèŒƒå¾ˆå›°çš„æ ·å­",
          parentSay: "Time to sleep.",
          cn: "è¯¥ç¡è§‰å•¦ã€‚",
          tip: "ç”¨å¤¸å¼ çš„å“ˆæ¬ åŠ¨ä½œï¼Œè®©â€œsleepâ€å˜æˆä¸€ä¸ªæ¸©æŸ”çš„ä¿¡å·ã€‚",
          audio: "guide_day24_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šæ‹æ‹åºŠï¼Œè®©å­©å­è‡ªå·±çˆ¬ä¸Šå»",
          parentSay: "Get in bed.",
          cn: "ä¸ŠåºŠå–½ã€‚",
          tip: "é¼“åŠ±ä»–è‡ªå·±é’»è¿›è¢«å­é‡Œï¼Œå¢åŠ å‚ä¸æ„Ÿã€‚",
          audio: "guide_day24_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šç»™å­©å­ç›–å¥½å°è¢«å­ï¼Œè½»è½»å‹ä¸€å‹è¾¹è§’",
          parentSay: "Here's your blanket. Good night.",
          cn: "ç»™ä½ å°è¢«å­ã€‚æ™šå®‰ã€‚",
          tip: "â€œblanket + good nightâ€å¯ä»¥æ¯å¤©é‡å¤ï¼Œå½¢æˆå›ºå®šçš„ç¡å‰ä»ªå¼ã€‚",
          audio: "guide_day24_step3.mp3"
        }
      ],
      story: {
        title: "Time to Sleep",
        textEn:
          "Little Robot yawns. Mom says, \"Time to sleep.\" Robot climbs into bed. Mom puts a soft blanket on him. The room is quiet. Robot whispers, \"Good night.\" Mom smiles and says, \"Good night, Robot.\"",
        textCn:
          "å°æœºå™¨äººæ‰“äº†ä¸ªå¤§å¤§çš„å“ˆæ¬ ã€‚å¦ˆå¦ˆè¯´ï¼šâ€œTime to sleep.ï¼ˆè¯¥ç¡è§‰å•¦ã€‚ï¼‰â€å°æœºå™¨äººçˆ¬ä¸ŠåºŠã€‚å¦ˆå¦ˆç»™ä»–ç›–ä¸Šä¸€æ¡è½¯è½¯çš„æ¯¯å­ã€‚æˆ¿é—´å®‰é™ä¸‹æ¥ã€‚å°æœºå™¨äººå°å£°è¯´ï¼šâ€œGood night.ï¼ˆæ™šå®‰ã€‚ï¼‰â€å¦ˆå¦ˆç¬‘ç€å›ä»–è¯´ï¼šâ€œGood night, Robot.ï¼ˆæ™šå®‰ï¼Œå°æœºå™¨äººã€‚ï¼‰â€",
        audio: "story_day24.mp3"
      },
      scenarioText: "Time to sleep. Get in bed. Here's your blanket. Good night.",
      scenarioAudio: "scenario_day24.mp3"
    },

    25: {
      title: "Day 25: Soft & Warm",
      icon: <IconSoft />,
      vocab: [
        {
          word: "soft",
          cn: "è½¯è½¯çš„",
          icon: <IconSoft />,
          sentence: "So soft.",
          audioWord: "word_soft.mp3",
          audioSent: "sent_so_soft.mp3"
        },
        {
          word: "warm",
          cn: "æš–æš–çš„",
          icon: <IconWarm />,
          sentence: "So warm.",
          audioWord: "word_warm.mp3",
          audioSent: "sent_so_warm.mp3"
        },
        {
          word: "dark",
          cn: "é»‘é»‘çš„",
          icon: <IconDark />,
          sentence: "So dark.",
          audioWord: "word_dark.mp3",
          audioSent: "sent_so_dark.mp3"
        },
        {
          word: "light",
          cn: "äº®äº®çš„/ç¯å…‰",
          icon: <IconLight />,
          sentence: "Turn on the light.",
          audioWord: "word_light.mp3",
          audioSent: "sent_turn_on_the_light.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šæ‹¿å­©å­æœ€å–œæ¬¢çš„è½¯ç©å…·æˆ–æ¯¯å­ç»™ä»–æ‘¸ä¸€æ‘¸",
          parentSay: "So soft.",
          cn: "å¥½è½¯è½¯å‘€ã€‚",
          tip: "è®©å­©å­ç”¨æ‰‹åå¤æ‘¸ä¸€æ‘¸ï¼Œä¸€è¾¹è¯´â€œsoftâ€ã€‚",
          audio: "guide_day25_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šæŠŠæ¯¯å­ç›–åœ¨å­©å­èº«ä¸Šï¼Œå†è½»è½»æŒ‰ä¸€æŒ‰",
          parentSay: "So warm.",
          cn: "å¥½æš–æš–å‘€ã€‚",
          tip: "å¯ä»¥æŠŠä½ çš„æ‰‹ä¹Ÿæ”¾è¿›è¢«å­é‡Œä¸€èµ·æ„Ÿå—â€œwarmâ€ã€‚",
          audio: "guide_day25_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šå…³ç¯ååœä¸€ç§’ï¼Œå†æ‰“å¼€å°å¤œç¯",
          parentSay: "So dark. Turn on the light.",
          cn: "å¥½é»‘å‘€ã€‚æŠŠç¯æ‰“å¼€ã€‚",
          tip: "è®©å­©å­çŸ¥é“é»‘é»‘çš„æ²¡å…³ç³»ï¼Œå¯ä»¥æœ‰ä¸€ç›å°å°çš„lighté™ªç€ä»–ã€‚",
          audio: "guide_day25_step3.mp3"
        }
      ],
      story: {
        title: "Soft and Warm",
        textEn:
          "Robot touches his blanket and says, \"So soft.\" He curls up and says, \"So warm.\" Mom turns off the lamp. \"So dark,\" Robot whispers. Mom turns on a tiny night-light. \"Light,\" Robot smiles.",
        textCn:
          "å°æœºå™¨äººæ‘¸äº†æ‘¸è‡ªå·±çš„å°æ¯¯å­ï¼Œè¯´ï¼šâ€œSo soft.ï¼ˆå¥½è½¯è½¯ã€‚ï¼‰â€ä»–èœ·åœ¨æ¯¯å­é‡Œï¼Œåˆè¯´ï¼šâ€œSo warm.ï¼ˆå¥½æš–æš–ã€‚ï¼‰â€å¦ˆå¦ˆå…³æ‰å°ç¯ã€‚å°æœºå™¨äººå°å£°è¯´ï¼šâ€œSo dark.ï¼ˆå¥½é»‘å‘€ã€‚ï¼‰â€å¦ˆå¦ˆæ‰“å¼€ä¸€ç›å°å¤œç¯ã€‚å°æœºå™¨äººç¬‘ç€è¯´ï¼šâ€œLight.ï¼ˆæœ‰ç¯å•¦ã€‚ï¼‰â€",
        audio: "story_day25.mp3"
      },
      scenarioText: "So soft. So warm. So dark. Turn on the light.",
      scenarioAudio: "scenario_day25.mp3"
    },

    26: {
      title: "Day 26: Star & Moon",
      icon: <IconStar />,
      vocab: [
        {
          word: "star",
          cn: "æ˜Ÿæ˜Ÿ",
          icon: <IconStar />,
          sentence: "A little star.",
          audioWord: "word_star.mp3",
          audioSent: "sent_a_little_star.mp3"
        },
        {
          word: "moon",
          cn: "æœˆäº®",
          icon: <IconMoon />,
          sentence: "Hello, moon.",
          audioWord: "word_moon.mp3",
          audioSent: "sent_hello_moon.mp3"
        },
        {
          word: "sky",
          cn: "å¤©ç©º",
          icon: <IconSky />,
          sentence: "Look at the sky.",
          audioWord: "word_sky.mp3",
          audioSent: "sent_look_at_the_sky.mp3"
        },
        {
          word: "dream",
          cn: "æ¢¦",
          icon: <IconDream />,
          sentence: "Sweet dreams.",
          audioWord: "word_dream.mp3",
          audioSent: "sent_sweet_dreams.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šæŠ±ç€å­©å­åˆ°çª—è¾¹æˆ–é˜³å°ï¼ŒæŒ‡ä¸€æŒ‡å¤©ä¸Šçš„æ˜Ÿæ˜Ÿï¼ˆå¯ä»¥æ˜¯æƒ³è±¡çš„ï¼‰",
          parentSay: "A little star.",
          cn: "ä¸€é¢—å°æ˜Ÿæ˜Ÿã€‚",
          tip: "å°±ç®—çœ‹ä¸åˆ°çœŸæ˜Ÿæ˜Ÿï¼Œä¹Ÿå¯ä»¥æŒ‡ç€çª—å¤–è¯´ï¼Œä¸€èµ·æƒ³è±¡ã€‚",
          audio: "guide_day26_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šæŒ‡å‘æœˆäº®çš„æ–¹å‘ï¼Œåšæ‰“æ‹›å‘¼çš„åŠ¨ä½œ",
          parentSay: "Hello, moon.",
          cn: "æœˆäº®ä½ å¥½ã€‚",
          tip: "å¯ä»¥æŒ¥æŒ¥æ‰‹ï¼Œè®©å­©å­ä¹Ÿå¯¹ç€â€œmoonâ€æ‰“æ‹›å‘¼ã€‚",
          audio: "guide_day26_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šæŠ¬å¤´çœ‹å¤©ç©ºï¼Œå†è½»è½»æŠŠå­©å­æŠ±å›åºŠä¸Š",
          parentSay: "Look at the sky. Sweet dreams.",
          cn: "çœ‹çœ‹å¤©ç©ºã€‚åšä¸ªç”œç”œçš„æ¢¦ã€‚",
          tip: "ç”¨â€œsweet dreamsâ€ä½œä¸ºå›åˆ°åºŠä¸Šçš„ç»“æŸè¯­ã€‚",
          audio: "guide_day26_step3.mp3"
        }
      ],
      story: {
        title: "Star and Moon",
        textEn:
          "Robot stands by the window. A little star twinkles. \"A little star,\" he says. The moon rises. \"Hello, moon.\" Robot looks at the dark sky. Mom hugs him and whispers, \"Sweet dreams.\"",
        textCn:
          "å°æœºå™¨äººç«™åœ¨çª—è¾¹ã€‚ä¸€é¢—å°æ˜Ÿæ˜Ÿä¸€é—ªä¸€é—ªï¼Œä»–è¯´ï¼šâ€œA little star.ï¼ˆä¸€é¢—å°æ˜Ÿæ˜Ÿã€‚ï¼‰â€æœˆäº®æ…¢æ…¢å‡èµ·æ¥ï¼Œä»–åˆè¯´ï¼šâ€œHello, moon.ï¼ˆæœˆäº®ä½ å¥½ã€‚ï¼‰â€å°æœºå™¨äººæœ›ç€é»‘é»‘çš„å¤©ç©ºã€‚å¦ˆå¦ˆæŠ±ä½ä»–ï¼Œå°å£°è¯´ï¼šâ€œSweet dreams.ï¼ˆåšä¸ªç”œç”œçš„æ¢¦ã€‚ï¼‰â€",
        audio: "story_day26.mp3"
      },
      scenarioText: "A little star. Hello, moon. Look at the sky. Sweet dreams.",
      scenarioAudio: "scenario_day26.mp3"
    },

    27: {
      title: "Day 27: Calm Down",
      icon: <IconQuiet />,
      vocab: [
        {
          word: "quiet",
          cn: "å®‰é™",
          icon: <IconQuiet />,
          sentence: "Be quiet.",
          audioWord: "word_quiet.mp3",
          audioSent: "sent_be_quiet.mp3"
        },
        {
          word: "slow",
          cn: "æ…¢æ…¢çš„",
          icon: <IconSlow />,
          sentence: "Slow down.",
          audioWord: "word_slow.mp3",
          audioSent: "sent_slow_down.mp3"
        },
        {
          word: "calm",
          cn: "å¹³é™",
          icon: <IconCalm />,
          sentence: "Calm down.",
          audioWord: "word_calm.mp3",
          audioSent: "sent_calm_down.mp3"
        },
        {
          word: "good night",
          cn: "æ™šå®‰",
          icon: <IconGN />,
          sentence: "Good night.",
          audioWord: "word_good_night.mp3",
          audioSent: "sent_good_night.mp3"
        }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šæŠŠæ‰‹æŒ‡æ”¾åœ¨å˜´è¾¹åšâ€œå˜˜â€çš„åŠ¨ä½œ",
          parentSay: "Be quiet.",
          cn: "å°å£°ä¸€ç‚¹ã€‚",
          tip: "ç”¨è½»å£°çš„â€œquietâ€æé†’ï¼Œæ¯”å¤§å£°å–Šæ›´æœ‰åŠ©äºå®‰é™ä¸‹æ¥ã€‚",
          audio: "guide_day27_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šå½“å­©å­åŠ¨ä½œå¾ˆå¿«æ—¶ï¼Œè½»è½»æ‹‰ä¸€æ‹‰ä»–çš„æ‰‹",
          parentSay: "Slow down.",
          cn: "æ…¢ä¸€ç‚¹ã€‚",
          tip: "å¯ä»¥é…åˆåšâ€œæ…¢åŠ¨ä½œâ€ï¼Œå¥½ç©åˆèƒ½æ”¾æ…¢èŠ‚å¥ã€‚",
          audio: "guide_day27_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šè®©å­©å­é åœ¨ä½ èº«ä¸Šï¼Œä¸€èµ·æ·±å‘¼å¸ä¸¤ä¸‰æ¬¡",
          parentSay: "Calm down. Good night.",
          cn: "æ…¢æ…¢é™ä¸‹æ¥ã€‚æ™šå®‰ã€‚",
          tip: "æ·±å‘¼å¸ + good nightï¼Œå¸®åŠ©ä»å…´å¥‹è¿‡æ¸¡åˆ°å…¥ç¡çŠ¶æ€ã€‚",
          audio: "guide_day27_step3.mp3"
        }
      ],
      story: {
        title: "Calm and Quiet",
        textEn:
          "Robot runs and jumps. Mom whispers, \"Be quiet.\" Robot slows down. Mom says, \"Slow down.\" Robot sits beside her. She puts her hand on his back. \"Calm down,\" she says. Robot closes his eyes. \"Good night.\"",
        textCn:
          "å°æœºå™¨äººåœ¨æˆ¿é—´é‡Œè·‘æ¥è·‘å»ã€è·³ä¸Šè·³ä¸‹ã€‚å¦ˆå¦ˆè½»å£°è¯´ï¼šâ€œBe quiet.ï¼ˆå°å£°ä¸€ç‚¹ã€‚ï¼‰â€å°æœºå™¨äººæ…¢äº†ä¸‹æ¥ã€‚å¦ˆå¦ˆåˆè¯´ï¼šâ€œSlow down.ï¼ˆæ…¢ä¸€ç‚¹ã€‚ï¼‰â€å°æœºå™¨äººååˆ°å¥¹èº«è¾¹ã€‚å¦ˆå¦ˆæŠŠæ‰‹æ”¾åœ¨ä»–èƒŒä¸Šï¼Œè¯´ï¼šâ€œCalm down.ï¼ˆæ…¢æ…¢é™ä¸‹æ¥ã€‚ï¼‰â€å°æœºå™¨äººé—­ä¸Šçœ¼ç›ï¼Œå°å£°è¯´ï¼šâ€œGood night.ï¼ˆæ™šå®‰ã€‚ï¼‰â€",
        audio: "story_day27.mp3"
      },
      scenarioText: "Be quiet. Slow down. Calm down. Good night.",
      scenarioAudio: "scenario_day27.mp3"
    },

    28: {
      title: "Day 28: Bedtime Review",
      icon: <IconReview />,
      // å¤ä¹  22â€“27 çš„ 24 ä¸ªè¯
      vocab: [
        { word: "happy",      cn: "å¼€å¿ƒçš„",   icon: <IconHappy />,   sentence: "I am happy.",             audioWord: "word_happy.mp3",      audioSent: "sent_i_am_happy.mp3" },
        { word: "sad",        cn: "éš¾è¿‡çš„",   icon: <IconSad />,     sentence: "I am sad.",               audioWord: "word_sad.mp3",        audioSent: "sent_i_am_sad.mp3" },
        { word: "angry",      cn: "ç”Ÿæ°”çš„",   icon: <IconAngry />,   sentence: "I am angry.",             audioWord: "word_angry.mp3",      audioSent: "sent_i_am_angry.mp3" },
        { word: "scared",     cn: "å®³æ€•çš„",   icon: <IconScared />,  sentence: "I am scared.",            audioWord: "word_scared.mp3",     audioSent: "sent_i_am_scared.mp3" },

        { word: "hug",        cn: "æ‹¥æŠ±",     icon: <IconHug />,     sentence: "Give me a hug.",         audioWord: "word_hug.mp3",        audioSent: "sent_give_me_a_hug.mp3" },
        { word: "kiss",       cn: "äº²äº²",     icon: <IconKiss />,    sentence: "Kiss, kiss!",             audioWord: "word_kiss.mp3",       audioSent: "sent_kiss_kiss.mp3" },
        { word: "smile",      cn: "å¾®ç¬‘",     icon: <IconSmile />,   sentence: "Smile, please.",          audioWord: "word_smile.mp3",      audioSent: "sent_smile_please.mp3" },
        { word: "cry",        cn: "å“­",       icon: <IconCry />,     sentence: "Don't cry.",              audioWord: "word_cry.mp3",        audioSent: "sent_dont_cry.mp3" },

        { word: "sleep",      cn: "ç¡è§‰",     icon: <IconSleep />,   sentence: "Time to sleep.",          audioWord: "word_sleep.mp3",      audioSent: "sent_time_to_sleep.mp3" },
        { word: "bed",        cn: "åºŠ",       icon: <IconBed />,     sentence: "Get in bed.",             audioWord: "word_bed.mp3",        audioSent: "sent_get_in_bed.mp3" },
        { word: "blanket",    cn: "æ¯¯å­",     icon: <IconBlanket />, sentence: "Here's your blanket.",    audioWord: "word_blanket.mp3",    audioSent: "sent_heres_your_blanket.mp3" },
        { word: "night",      cn: "å¤œæ™š",     icon: <IconNight />,   sentence: "Good night.",             audioWord: "word_night.mp3",      audioSent: "sent_good_night.mp3" },

        { word: "soft",       cn: "è½¯è½¯çš„",   icon: <IconSoft />,    sentence: "So soft.",                audioWord: "word_soft.mp3",       audioSent: "sent_so_soft.mp3" },
        { word: "warm",       cn: "æš–æš–çš„",   icon: <IconWarm />,    sentence: "So warm.",                audioWord: "word_warm.mp3",       audioSent: "sent_so_warm.mp3" },
        { word: "dark",       cn: "é»‘é»‘çš„",   icon: <IconDark />,    sentence: "So dark.",                audioWord: "word_dark.mp3",       audioSent: "sent_so_dark.mp3" },
        { word: "light",      cn: "äº®äº®çš„/ç¯å…‰", icon: <IconLight />, sentence: "Turn on the light.",     audioWord: "word_light.mp3",      audioSent: "sent_turn_on_the_light.mp3" },

        { word: "star",       cn: "æ˜Ÿæ˜Ÿ",     icon: <IconStar />,    sentence: "A little star.",          audioWord: "word_star.mp3",       audioSent: "sent_a_little_star.mp3" },
        { word: "moon",       cn: "æœˆäº®",     icon: <IconMoon />,    sentence: "Hello, moon.",            audioWord: "word_moon.mp3",       audioSent: "sent_hello_moon.mp3" },
        { word: "sky",        cn: "å¤©ç©º",     icon: <IconSky />,     sentence: "Look at the sky.",        audioWord: "word_sky.mp3",        audioSent: "sent_look_at_the_sky.mp3" },
        { word: "dream",      cn: "æ¢¦",       icon: <IconDream />,   sentence: "Sweet dreams.",           audioWord: "word_dream.mp3",      audioSent: "sent_sweet_dreams.mp3" },

        { word: "quiet",      cn: "å®‰é™",     icon: <IconQuiet />,   sentence: "Be quiet.",               audioWord: "word_quiet.mp3",      audioSent: "sent_be_quiet.mp3" },
        { word: "slow",       cn: "æ…¢æ…¢çš„",   icon: <IconSlow />,    sentence: "Slow down.",              audioWord: "word_slow.mp3",       audioSent: "sent_slow_down.mp3" },
        { word: "calm",       cn: "å¹³é™",     icon: <IconCalm />,    sentence: "Calm down.",              audioWord: "word_calm.mp3",       audioSent: "sent_calm_down.mp3" },
        { word: "good night", cn: "æ™šå®‰",     icon: <IconGN />,      sentence: "Good night.",             audioWord: "word_good_night.mp3", audioSent: "sent_good_night.mp3" }
      ],
      script: [
        {
          step: 1,
          action: "åŠ¨ä½œï¼šè¯·å­©å­è½®æµåšå¼€å¿ƒã€éš¾è¿‡ã€ç”Ÿæ°”ã€å®³æ€•çš„è¡¨æƒ…",
          parentSay: "Show me happy, sad, angry, scared!",
          cn: "ç»™æˆ‘çœ‹çœ‹å¼€å¿ƒã€éš¾è¿‡ã€ç”Ÿæ°”ã€å®³æ€•çš„è„¸ï¼",
          tip: "è®©å­©å­ç”¨è¡¨æƒ…â€œå¤ä¹ â€æƒ…ç»ªå•è¯ã€‚",
          audio: "guide_day28_step1.mp3"
        },
        {
          step: 2,
          action: "åŠ¨ä½œï¼šç»™å­©å­ä¸€ä¸ªæ‹¥æŠ±å’Œäº²äº²ï¼Œä¸€èµ·ç¬‘ä¸€ç¬‘",
          parentSay: "Hug, kiss, smile. No cry.",
          cn: "æŠ±æŠ±ã€äº²äº²ã€ç¬‘ä¸€ç¬‘ï¼Œä¸è¦å“­ã€‚",
          tip: "æŠŠå‰å‡ å¤©çš„hug / kiss / smile / cry ä¸²èµ·æ¥ã€‚",
          audio: "guide_day28_step2.mp3"
        },
        {
          step: 3,
          action: "åŠ¨ä½œï¼šèººå›åºŠä¸Šï¼Œçœ‹ä¸€çœ¼çª—å¤–çš„å¤œç©ºï¼Œå†å…³ç¯",
          parentSay: "Good night. Sweet dreams.",
          cn: "æ™šå®‰ï¼Œåšä¸ªç”œç”œçš„æ¢¦ã€‚",
          tip: "ç”¨ä¸€å¥å›ºå®šçš„è¯ï¼Œç»™ç¬¬å››å‘¨åšä¸€ä¸ªä»ªå¼æ„Ÿçš„æ”¶å°¾ã€‚",
          audio: "guide_day28_step3.mp3"
        }
      ],
      story: {
        title: "Bedtime Week Review",
        textEn:
          "It is bedtime week review. Robot shows his happy face, sad face, angry face, and scared face. Mom gives him a hug and a kiss. Robot smiles. He gets in bed with his soft, warm blanket. The room is dark, so Mom turns on the light. They look at the star and the moon in the sky. Mom whispers, \"Be quiet. Calm down. Good night.\" Robot closes his eyes and dreams sweet dreams.",
        textCn:
          "ä»Šå¤©æ˜¯ç¡å‰ä¸€å‘¨çš„å°å¤ä¹ ã€‚å°æœºå™¨äººå…ˆåšå‡ºå¼€å¿ƒã€éš¾è¿‡ã€ç”Ÿæ°”ã€å®³æ€•çš„è¡¨æƒ…ã€‚å¦ˆå¦ˆç»™äº†ä»–ä¸€ä¸ªhugå’Œä¸€ä¸ªkissï¼Œå°æœºå™¨äººç¬‘äº†ã€‚ä»–é’»è¿›åºŠé‡Œï¼Œç›–ä¸Šè½¯è½¯ã€æš–æš–çš„æ¯¯å­ã€‚æˆ¿é—´é‡Œæœ‰ç‚¹é»‘ï¼Œå¦ˆå¦ˆæ‰“å¼€ä¸€ç›å°ç¯ã€‚ä»–ä»¬ä¸€èµ·çœ‹çœ‹çª—å¤–çš„æ˜Ÿæ˜Ÿå’Œæœˆäº®ã€‚å¦ˆå¦ˆè½»å£°è¯´ï¼šâ€œBe quiet. Calm down. Good night.ï¼ˆå°å£°ä¸€ç‚¹ï¼Œæ…¢æ…¢é™ä¸‹æ¥ï¼Œæ™šå®‰ã€‚ï¼‰â€å°æœºå™¨äººé—­ä¸Šçœ¼ç›ï¼Œåšèµ·ç”œç”œçš„æ¢¦ã€‚",
        audio: "story_day28.mp3"
      },
      scenarioText:
        "I am happy, sad, angry, scared. Hug and kiss. Smile, don't cry. Time to sleep in bed with a blanket at night. So soft, so warm, so darkâ€”turn on the light. A little star, hello moon, look at the sky, sweet dreams. Be quiet, slow down, calm down. Good night.",
      scenarioAudio: "scenario_day28.mp3"
    }
  };

  // ------------------ React App ------------------
  const DayApp = () => {
    const content = allContent[dayNumber];

    const [activeTab, setActiveTab] = useState("learn");
    const [isPlaying, setIsPlaying] = useState(false);
    const [currentFile, setCurrentFile] = useState(null);
    const [currentTime, setCurrentTime] = useState(0);
    const [duration, setDuration] = useState(0);
    const audioRef = useRef(new Audio());

    const [currentVocabIndex, setCurrentVocabIndex] = useState(0);
    const [showVocabTranslation, setShowVocabTranslation] = useState(false);
    const [showStoryTranslation, setShowStoryTranslation] = useState(false);
    const [currentStep, setCurrentStep] = useState(0);

    const touchStartX = useRef(0);
    const touchEndX = useRef(0);

    useEffect(() => {
      const audio = audioRef.current;
      const updateTime = () => setCurrentTime(audio.currentTime);
      const onLoadedMetadata = () => {
        if (!isNaN(audio.duration)) setDuration(audio.duration);
      };
      const onEnded = () => {
        setIsPlaying(false);
        setCurrentTime(0);
      };

      audio.addEventListener("timeupdate", updateTime);
      audio.addEventListener("loadedmetadata", onLoadedMetadata);
      audio.addEventListener("ended", onEnded);

      return () => {
        audio.removeEventListener("timeupdate", updateTime);
        audio.removeEventListener("loadedmetadata", onLoadedMetadata);
        audio.removeEventListener("ended", onEnded);
        audio.pause();
      };
    }, []);

    const handlePlayClick = (filename) => {
      const audio = audioRef.current;

      if (currentFile === filename) {
        if (isPlaying) {
          audio.pause();
          setIsPlaying(false);
        } else {
          audio.play().then(() => setIsPlaying(true));
        }
        return;
      }

      audio.src = filename;
      setCurrentFile(filename);
      setCurrentTime(0);
      setDuration(0);

      audio.play()
        .then(() => setIsPlaying(true))
        .catch((err) => {
          console.error("æ’­æ”¾å¤±è´¥", err);
          alert("æ‰¾ä¸åˆ°éŸ³é¢‘æ–‡ä»¶: " + filename + "\nè¯·ç¡®ä¿ mp3 æ–‡ä»¶å’Œ html åœ¨åŒä¸€ç›®å½•ã€‚");
          setIsPlaying(false);
        });
    };

    const handleSeek = (e) => {
      const t = parseFloat(e.target.value);
      setCurrentTime(t);
      audioRef.current.currentTime = t;
    };

    const formatTime = (t) => {
      if (!t || isNaN(t)) return "0:00";
      const mins = Math.floor(t / 60);
      const secs = Math.floor(t % 60);
      return `${mins}:${secs < 10 ? "0" : ""}${secs}`;
    };

    const nextCard = () => {
      if (currentVocabIndex < content.vocab.length - 1) {
        setCurrentVocabIndex((prev) => prev + 1);
        setShowVocabTranslation(false);
      }
    };
    const prevCard = () => {
      if (currentVocabIndex > 0) {
        setCurrentVocabIndex((prev) => prev - 1);
        setShowVocabTranslation(false);
      }
    };

    const handleTouchStart = (e) => {
      touchStartX.current = e.targetTouches[0].clientX;
    };
    const handleTouchMove = (e) => {
      touchEndX.current = e.targetTouches[0].clientX;
    };
    const handleTouchEnd = () => {
      if (!touchStartX.current || !touchEndX.current) return;
      const diff = touchStartX.current - touchEndX.current;
      if (diff > 50) nextCard();
      if (diff < -50) prevCard();
      touchStartX.current = 0;
      touchEndX.current = 0;
    };

    return (
      <div className="flex flex-col min-h-screen max-w-md mx-auto bg-slate-50 shadow-2xl relative pb-28">
        {/* Header */}
        <header className="bg-blue-500 text-white p-4 shadow-md text-center sticky top-0 z-10">
          <h1 className="text-xl font-bold flex items-center justify-center gap-2">
            {content.icon} {content.title}
          </h1>
          <p className="text-xs text-blue-100">Bedtime Week Â· Day {dayNumber}</p>
        </header>

        {/* Main */}
        <main className="flex-1 p-4 overflow-y-auto pb-24 hide-scrollbar">
          {/* TAB: å•è¯ */}
          {activeTab === "learn" && (() => {
            const item = content.vocab[currentVocabIndex];
            return (
              <div
                className="flex-1 flex flex-col justify-center items-center space-y-6 animate-fade-in"
                onTouchStart={handleTouchStart}
                onTouchMove={handleTouchMove}
                onTouchEnd={handleTouchEnd}
              >
                <div className="flex gap-1 mb-2 flex-wrap justify-center max-w-xs">
                  {content.vocab.map((_, idx) => (
                    <div
                      key={idx}
                      className={`h-2 rounded-full transition-all duration-300 ${
                        idx === currentVocabIndex ? "w-6 bg-blue-500" : "w-2 bg-gray-300"
                      }`}
                    ></div>
                  ))}
                </div>

                <div className="bg-white w-full rounded-3xl p-8 shadow-xl flex flex-col items-center relative min-h-[380px] justify-between border-b-8 border-blue-100">
                  <div className="flex-1 flex flex-col items-center justify-center w-full">
                    <p className="text-xs text-gray-400 mb-2">
                      Word {currentVocabIndex + 1} of {content.vocab.length}
                    </p>
                    <div className="mb-6 transform scale-110">
                      {item.icon}
                    </div>

                    <h3
                      className="text-4xl font-extrabold text-gray-800 mb-2 cursor-pointer active:scale-95 transition-transform text-center text-blue-600"
                      onClick={() => handlePlayClick(item.audioWord)}
                    >
                      {item.word}
                      <span className="text-lg text-blue-300 ml-1">ğŸ”ˆ</span>
                    </h3>
                    <p className="text-xs text-gray-400 mb-4">(ç‚¹å‡»å•è¯æ’­æ”¾è¯»éŸ³)</p>

                    <div
                      onClick={() => setShowVocabTranslation(true)}
                      className="w-full text-center py-4 px-2 rounded-xl bg-gray-50 cursor-pointer"
                    >
                      <p
                        className={`text-xl font-medium text-gray-700 transition-all duration-500 ${
                          showVocabTranslation ? "revealed" : "blur-reveal"
                        }`}
                      >
                        {item.cn}
                      </p>
                      {!showVocabTranslation && (
                        <p className="text-xs text-gray-400 mt-[-20px] pointer-events-none">
                          ç‚¹å‡»æ˜¾ç¤ºä¸­æ–‡
                        </p>
                      )}
                    </div>
                  </div>

                  <div className="w-full mt-6 bg-blue-50 rounded-2xl p-4 flex items-center justify-between border border-blue-100">
                    <span className="text-blue-900 font-medium text-lg italic">
                      "{item.sentence}"
                    </span>
                    <button
                      onClick={() => handlePlayClick(item.audioSent)}
                      className="btn-press bg-blue-500 text-white p-3 rounded-full shadow-lg hover:bg-blue-600 transition ml-3"
                    >
                      <IconVolume />
                    </button>
                  </div>
                </div>

                <div className="flex justify-between w-full px-4 text-gray-400">
                  <button
                    onClick={prevCard}
                    disabled={currentVocabIndex === 0}
                    className="disabled:opacity-20 p-2 text-3xl btn-press"
                  >
                    â¬…ï¸
                  </button>
                  <span className="text-sm mt-2 opacity-50">
                    {currentVocabIndex + 1} / {content.vocab.length}
                  </span>
                  <button
                    onClick={nextCard}
                    disabled={currentVocabIndex === content.vocab.length - 1}
                    className="disabled:opacity-20 p-2 text-3xl btn-press"
                  >
                    â¡ï¸
                  </button>
                </div>
              </div>
            );
          })()}

          {/* TAB: ç£¨è€³æœµ */}
          {activeTab === "audio" && (
            <div className="bg-white rounded-2xl p-6 shadow-lg text-center space-y-6 mt-4 animate-fade-in">
              <div className="text-6xl">ğŸ§</div>
              <div>
                <h2 className="text-xl font-bold">æƒ…æ™¯ç£¨è€³æœµ</h2>
                <p className="text-gray-500 text-sm mt-1">æŠŠä»Šå¤©çš„å•è¯è¿æˆä¸€å°æ®µè¯</p>
              </div>
              <div className="bg-gray-100 rounded-xl p-4 text-left">
                <p className="text-gray-600 font-mono text-sm leading-relaxed">
                  {content.scenarioText}
                </p>
              </div>
              <div className="space-y-4">
                <button
                  onClick={() => handlePlayClick(content.scenarioAudio)}
                  className="btn-press w-full py-6 rounded-xl flex items-center justify-center gap-3 font-bold text-xl text-white shadow-lg transition transform hover:scale-105 bg-blue-500 hover:bg-blue-600"
                >
                  {isPlaying && currentFile === content.scenarioAudio ? (
                    <>
                      <IconPause /> æš‚åœæƒ…æ™¯éŸ³é¢‘
                    </>
                  ) : (
                    <>
                      <IconPlay /> æ’­æ”¾æƒ…æ™¯éŸ³é¢‘
                    </>
                  )}
                </button>

                {currentFile === content.scenarioAudio && (
                  <div className="bg-gray-50 p-3 rounded-xl">
                    <div className="flex items-center gap-2 mb-2">
                      <span className="text-xs text-gray-500">
                        {formatTime(currentTime)}
                      </span>
                      <input
                        type="range"
                        min="0"
                        max={duration || 0}
                        step="0.1"
                        value={currentTime}
                        onChange={handleSeek}
                        className="flex-1"
                      />
                      <span className="text-xs text-gray-500">
                        {formatTime(duration)}
                      </span>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* TAB: å‰§æœ¬ */}
          {activeTab === "guide" && (
            <div className="space-y-4 animate-fade-in">
              {content.script.map((step, index) => (
                <div
                  key={index}
                  className={`bg-white rounded-xl shadow overflow-hidden transition-all duration-300 ${
                    currentStep === index ? "ring-2 ring-blue-400" : "opacity-90"
                  }`}
                >
                  <div
                    className="p-3 cursor-pointer flex justify-between items-center bg-gray-50 border-b"
                    onClick={() => setCurrentStep(index)}
                  >
                    <span className="font-bold text-gray-700">Step {step.step}</span>
                    {currentStep === index ? <IconCheck /> : <IconCircle />}
                  </div>
                  {currentStep === index && (
                    <div className="p-4 space-y-3">
                      <div className="text-sm text-gray-700 bg-slate-50 p-2 rounded font-medium">
                        â˜… {step.action}
                      </div>
                      <div className="bg-slate-50 p-3 rounded-xl border border-slate-200 relative">
                        <p className="text-xs text-gray-400 uppercase tracking-wide mb-1">
                          å®¶é•¿è¯´:
                        </p>
                        <p className="text-lg font-bold text-gray-800 pr-8">
                          {step.parentSay}
                        </p>
                        <p className="text-sm text-gray-500 mt-1">
                          ({step.cn})
                        </p>
                        <button
                          onClick={() => handlePlayClick(step.audio)}
                          className="absolute right-2 top-2 text-blue-500 p-2 btn-press"
                        >
                          <IconVolume />
                        </button>
                      </div>
                      <p className="text-xs text-gray-400 italic text-center">
                        "{step.tip}"
                      </p>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}

          {/* TAB: æ•…äº‹ */}
          {activeTab === "story" && (
            <div className="bg-white rounded-2xl p-6 shadow-lg space-y-4 mt-2 animate-fade-in flex flex-col h-full relative">
              <div className="text-center border-b pb-4">
                <h2 className="text-xl font-bold text-blue-600">{content.story.title}</h2>
                <p className="text-xs text-gray-400">Read & Listen</p>
              </div>

              <div className="flex-1 overflow-y-auto space-y-6 pb-2">
                <div className="bg-slate-50 p-4 rounded-xl">
                  <p className="text-lg leading-relaxed font-bold text-gray-800">
                    {content.story.textEn}
                  </p>
                </div>

                <div
                  className="relative p-4 rounded-xl border-2 border-dashed border-gray-200 cursor-pointer hover:bg-gray-50 active:bg-gray-100 transition"
                  onClick={() => setShowStoryTranslation(true)}
                >
                  <p className="text-xs text-gray-400 mb-2 font-bold">
                    ä¸­æ–‡å¤§æ„ï¼ˆç‚¹å‡»æŸ¥çœ‹ï¼‰:
                  </p>
                  <p
                    className={`text-base leading-relaxed text-gray-600 transition-all duration-500 ${
                      showStoryTranslation ? "revealed" : "blur-reveal"
                    }`}
                  >
                    {content.story.textCn}
                  </p>
                </div>
              </div>

              <div className="mt-auto pt-4 space-y-4">
                <button
                  onClick={() => handlePlayClick(content.story.audio)}
                  className="btn-press w-full py-6 rounded-xl flex items-center justify-center gap-3 font-bold text-xl text-white shadow-lg transition transform hover:scale-105 bg-blue-500 hover:bg-blue-600"
                >
                  {isPlaying && currentFile === content.story.audio ? (
                    <>
                      <IconPause /> æš‚åœæ•…äº‹
                    </>
                  ) : (
                    <>
                      <IconPlay /> æ’­æ”¾æ•…äº‹
                    </>
                  )}
                </button>

                {currentFile === content.story.audio && (
                  <div className="bg-gray-50 p-3 rounded-xl">
                    <div className="flex items-center gap-2 mb-2">
                      <span className="text-xs text-gray-500">
                        {formatTime(currentTime)}
                      </span>
                      <input
                        type="range"
                        min="0"
                        max={duration || 0}
                        step="0.1"
                        value={currentTime}
                        onChange={handleSeek}
                        className="flex-1"
                      />
                      <span className="text-xs text-gray-500">
                        {formatTime(duration)}
                      </span>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}
        </main>

        {/* Bottom Nav */}
        <nav
          className="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around p-2 pb-safe shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20 max-w-md mx-auto">
          <button
            onClick={() => setActiveTab("learn")}
            className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
              activeTab === "learn" ? "text-blue-600" : "text-gray-400"
            }`}
          >
            <span className="text-xl">ğŸ“–</span>
            <span className="text-xs font-medium">å•è¯</span>
          </button>
          <button
            onClick={() => setActiveTab("audio")}
            className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
              activeTab === "audio" ? "text-blue-600" : "text-gray-400"
            }`}
          >
            <span className="text-xl">ğŸµ</span>
            <span className="text-xs font-medium">ç£¨è€³æœµ</span>
          </button>
          <button
            onClick={() => setActiveTab("guide")}
            className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
              activeTab === "guide" ? "text-blue-600" : "text-gray-400"
            }`}
          >
            <span className="text-xl">ğŸ“‹</span>
            <span className="text-xs font-medium">å‰§æœ¬</span>
          </button>
          <button
            onClick={() => setActiveTab("story")}
            className={`flex flex-col items-center p-2 rounded-lg flex-1 ${
              activeTab === "story" ? "text-blue-600" : "text-gray-400"
            }`}
          >
            <IconBook />
            <span className="text-xs font-medium">æ•…äº‹</span>
          </button>
        </nav>
      </div>
    );
  };

  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<DayApp />);
</script>
</body>
</html>
